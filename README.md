# CLInok
clinok is a tool for parsing command line options. To create a cli interface for your program, you need to:

1. create a file with a description of the options

file format is a list of option declarations.

Option without default value considered as required (note: TAG default value is always `false`, enum default value is always first element):

Supported declarations listed below

```CMake
# TAG is an option which is true if present and has no value.
# for example: git --version
TAG(name, "description")

# just bool, value parsed as true for "on", "ON", "1", "yes", "YES", "true"
# and as false for  "off", "OFF", "0", "no", "NO", "false"
BOOLEAN(name, "description", default(false))
BOOLEAN(name, "description") # without default

# just string
STRING(name, "description", default("default string"))
STRING(name, "description")

# ENUM - one of listed values

# integer enum
ENUM(name, "enum description", 1, 2, 3, 4, 5)
# string enum
ENUM(name, "string enum description", "first and default value", "value2", "value3")

# ENUM with autoparsing into c++ scoped enum. first value is default
# restrictions from c++: dont use keywords (default, struct and etc)
STRING_ENUM(name, "enum description", red, blue, green)

# just int
INTEGER(name, "description", default(42))
INTEGER(name, "description")

# aliases to other options declared before
# Note: 'help' program always supports 'help' option and answers autogenerated text when --help present
ALIAS(h, help)
# Note: alias not required to be single character
ALIAS(longalias, option_name)

```

3. set generation options

  generation options:
  * `program_options_file`: required. file with a list of options in declarative form.
  * `CLINOK_NAMESPACE_NAME`: optional. Value by default: `cli`. May be used to generate several different cli interfaces, for example if you want to make an interface similar to `git status <...options>` / `git branch <...options>` / `git stash <...options>`
3. `#include <clinok/cli_interface.hpp>` that generates the options struct, code for parsing options and `--help` message

## example

program_options.def file:

```cpp

// default value is "black", possible values "black", "green", "red", "blue"
STRING_ENUM(color, "text color", black, green, red, blue)
INTEGER(count, "count of lines", default(2))

ALIAS(h, help)
ALIAS(c, color)

```

main.cpp file:

```cpp
#define program_options_file "path/to/program_options.def"
#include <clinok/cli_interface.hpp>

int main(int argc, char* argv[]) {
  cli::error_code ec;
  cli::options o = cli::parse(argc, argv, ec);
  if (ec) {
    cli::print_err(ec);
    return -1;
  }
  your_logic(o.color, o.count);
  return 0;
}

```

Output:

```bash
>name.exe --help

 --color <string>  one of: ["black" "green", "red", "blue"] text color
 --count <int>     default: 2, count of lines
 --help            list of all options
 -h is an alias to help
 -c is an alias to color

>name.exe --colar "red"
unknown option --colar you probably meant the --color option

>name.exe -c "red"
<your logic output>
```


Notes:

* option is required if has no default value (enum and tag always have default value)
* if there are several values ​​of one option in the list, the last one replaces the previous ones
* program always supports the --help option
* parsing continues until the first error (or success)
* unix style alias collapsing is not supported to avoid misinterpretation of typos
  example which situation this library avoids:
```cpp
misspelled option --force typed as -force may be interpreted by linux cli as
—force —overwrite —remove —critical —entries

in clinok its just "may be you meant --force"

```







